# SMSF Portfolio Review - Orchestrated Version
# =========================================================================
# Uses goal_template to reference reusable analysis script.
# User provides variables (portfolio holdings) and email config.
#
# TEMPLATE: job-templates/smsf-portfolio-analysis-goal.toml
# Contains: goal, tools, thinking_level, output_tags
#
# THIS FILE: User-specific configuration
# Contains: variables (holdings with units/avg_price), benchmarks, email settings
# =========================================================================

id = "smsf-portfolio-daily-orchestrated"
name = "SMSF Portfolio Strategy Review (Thinking)"
type = "orchestrator"
description = "AI-powered SMSF portfolio analysis with strategic reasoning"
tags = ["smsf", "portfolio", "daily", "orchestrator", "thinking"]
schedule = ""
timeout = "3h"
enabled = true
auto_start = false

# =========================================================================
# User Configuration - Portfolio Holdings
# =========================================================================

[config]
# Portfolio holdings - add/remove as needed
# Available variable keys: ticker, name, industry, units, avg_price, weighting
variables = [
    # =========================================================================
    # ETFs & Index Funds (Defensive/Core)
    # =========================================================================
    { ticker = "AAA", name = "Betashares Australian High Interest Cash ETF", industry = "cash-etf", units = 198, avg_price = 50.235, weighting = 2.73 },
    { ticker = "ACDC", name = "ETFS Battery Tech & Lithium ETF", industry = "thematic-etf", units = 141, avg_price = 141.001, weighting = 5.50 },
    { ticker = "NDQ", name = "BetaShares NASDAQ 100 ETF", industry = "global-etf", units = 177, avg_price = 56.307, weighting = 2.73 },
    { ticker = "PMGOLD", name = "Perth Mint Gold", industry = "gold-etf", units = 746, avg_price = 66.789, weighting = 13.63 },
    { ticker = "SEMI", name = "ETFS Semiconductor ETF", industry = "thematic-etf", units = 864, avg_price = 23.113, weighting = 5.53 },
    { ticker = "VACF", name = "Vanguard Australian Corporate Fixed Interest Index ETF", industry = "bond-etf", units = 193, avg_price = 51.666, weighting = 2.73 },
    { ticker = "VGS", name = "Vanguard MSCI Index International Shares ETF", industry = "global-etf", units = 64, avg_price = 154.031, weighting = 2.71 },

    # =========================================================================
    # Infrastructure & Industrial Services
    # =========================================================================
    { ticker = "APA", name = "APA Group", industry = "energy-infrastructure", units = 2129, avg_price = 9.321, weighting = 5.48 },
    { ticker = "DOW", name = "Downer EDI Limited", industry = "infrastructure-services", units = 2487, avg_price = 7.991, weighting = 5.44 },
    { ticker = "GNP", name = "GenusPlus Group Ltd", industry = "infrastructure", units = 3159, avg_price = 6.303, weighting = 5.24 },
    { ticker = "SKS", name = "SKS Technologies Group", industry = "technology-infrastructure", units = 4925, avg_price = 4.025, weighting = 5.34 },
    { ticker = "SRG", name = "SRG Global Limited", industry = "industrial-services", units = 6621, avg_price = 3.000, weighting = 5.36 },
    { ticker = "SSM", name = "Service Stream Limited", industry = "infrastructure-services", units = 8619, avg_price = 2.269, weighting = 5.29 },

    # =========================================================================
    # Small/Mid Cap Growth
    # =========================================================================
    { ticker = "ASB", name = "Austal Limited", industry = "defence-shipbuilding", units = 2915, avg_price = 6.819, weighting = 5.26 },
    { ticker = "CGS", name = "Cogstate Limited", industry = "healthcare-technology", units = 8582, avg_price = 2.322, weighting = 5.51 },
    { ticker = "GDG", name = "Generation Development Group", industry = "financial-services", units = 3406, avg_price = 5.831, weighting = 5.42 },
    { ticker = "MYG", name = "Mayfield Childcare Limited", industry = "childcare-services", units = 6778, avg_price = 2.950, weighting = 5.43 },
    { ticker = "PNC", name = "Pioneer Credit Limited", industry = "financial-services", units = 28772, avg_price = 0.684, weighting = 5.21 },

    # =========================================================================
    # Large Cap Blue Chips (Stable Income)
    # =========================================================================
    { ticker = "WES", name = "Wesfarmers Limited", industry = "retail", units = 122, avg_price = 81.209, weighting = 2.73 },
    { ticker = "WOW", name = "Woolworths Group Limited", industry = "retail", units = 339, avg_price = 29.329, weighting = 2.73 },
]

# Benchmark indices for comparison
benchmarks = [
    { code = "XJO", name = "S&P/ASX 200" },
    { code = "XSO", name = "S&P/ASX Small Ordinaries" },
]

# =========================================================================
# Orchestrator Step - References Goal Template
# =========================================================================

[step.strategic_review]
type = "orchestrator"
description = "AI-powered strategic portfolio review"
on_error = "continue"

# Reference the goal template (contains goal, tools, thinking_level, output_tags)
goal_template = "smsf-portfolio-analysis-goal"

# =========================================================================
# Email Step - Send Portfolio Report
# =========================================================================

[step.email_portfolio]
type = "email"
description = "Email consolidated SMSF portfolio review"
depends = "strategic_review"
always_run = true
on_error = "fail"
to = "bobmcallan@gmail.com"
subject = "SMSF Portfolio Review - AI-Powered Strategic Analysis"
body_from_tag = "smsf-portfolio-review"
