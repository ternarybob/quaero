# ASX Stocks Daily Analysis - Orchestrated Version
# =========================================================================
# Uses goal_template to reference reusable analysis script.
# User provides variables (stocks to analyze) and email config.
#
# TEMPLATE: job-templates/asx-stock-analysis-goal.toml
# Contains: goal, tools, thinking_level, output_tags
#
# THIS FILE: User-specific configuration
# Contains: variables (stocks), benchmarks, email settings
# =========================================================================

id = "asx-stocks-daily-orchestrated"
name = "ASX Daily Stock Analysis (Thinking)"
type = "orchestrator"
description = "AI-powered stock analysis using dynamic planning and execution"
tags = ["asx", "stocks", "daily", "orchestrator", "thinking"]
schedule = ""
timeout = "2h"
enabled = true
auto_start = false

# =========================================================================
# User Configuration - Stocks to Analyze
# =========================================================================

[config]
# Stocks to analyze - add/remove as needed
# Available variable keys: ticker, name, industry
variables = [
    { ticker = "GNP", name = "GenusPlus Group Ltd", industry = "infrastructure" },
    { ticker = "SKS", name = "SKS Technologies Group", industry = "technology-infrastructure" },
    # { ticker = "CBA", name = "Commonwealth Bank", industry = "banking" },
    { ticker = "WES", name = "Wesfarmers", industry = "retail" },
    { ticker = "EXR", name = "Elixir Energy", industry = "energy" },
    { ticker = "SRL", name = "Sunrise Energy Metals", industry = "mining" },
    { ticker = "CSL", name = "CSL Limited", industry = "healthcare" },
    { ticker = "ROC", name = "RocketBoots Limited", industry = "AI" },
]

# Benchmark indices for comparison
benchmarks = [
    { code = "XJO", name = "S&P/ASX 200" },
]

# =========================================================================
# Orchestrator Step - References Goal Template
# =========================================================================

[step.analyze_stocks]
type = "orchestrator"
description = "AI-powered stock analysis with dynamic planning"
on_error = "continue"

# Reference the goal template (contains goal, tools, thinking_level, output_tags)
goal_template = "asx-stock-analysis-goal"

# =========================================================================
# Email Step - Send consolidated report
# =========================================================================

[step.email_report]
type = "email"
description = "Email consolidated stock analysis report"
depends = "analyze_stocks"
always_run = true
on_error = "fail"
to = "bobmcallan@gmail.com"
subject = "ASX Daily Stock Analysis - AI-Powered Report"
body_from_tag = "stock-recommendation"

# Error reporting configuration
on_error_subject = "ASX Daily Analysis - An Error Occurred"
include_logs_on_error = true
