# Ticker Metadata for Portfolio
# =========================================================================
# Fetches company metadata for portfolio holdings from Navexa
#
# WORKFLOW:
# 1. Fetch Portfolio: Get holdings from Navexa portfolio
# 2. Fetch Metadata: Get company metadata for each holding
#
# OUTPUT TAG: ticker-metadata-output
# =========================================================================

# =========================================================================
# Job Definition (MUST be at root level before any [section])
# =========================================================================
id = "ticker-metadata-portfolio"
name = "Ticker Metadata (Portfolio)"
type = "orchestrator"
description = "Fetch company metadata for portfolio holdings"
tags = ["ticker-metadata", "portfolio"]
schedule = ""
timeout = "5m"
enabled = true
auto_start = false

# =========================================================================
# META (documentation only, not parsed)
# =========================================================================
[meta]
author = "Claude Code"
version = "1.0"
created = "2026-01-20"
updated = "2026-01-20"
purpose = "Fetch metadata for Navexa portfolio holdings"

# =========================================================================
# User Configuration
# =========================================================================
[config]
portfolio_name = "My Portfolio"

# =========================================================================
# Step 1: Fetch Portfolio
# =========================================================================
[step.fetch_portfolio]
type = "navexa_portfolio"
description = "Fetch portfolio holdings from Navexa"
on_error = "fail"
name = "{config.portfolio_name}"
output_tags = ["fetch_metadata"]

# =========================================================================
# Step 2: Fetch Metadata
# =========================================================================
[step.fetch_metadata]
type = "ticker_metadata"
description = "Fetch company metadata for portfolio holdings"
depends = "fetch_portfolio"
on_error = "continue"
cache_hours = 168
output_tags = ["ticker-metadata-output"]
