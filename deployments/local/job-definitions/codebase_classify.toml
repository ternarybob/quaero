# Codebase Assessment Pipeline - Language Agnostic
id = "codebase_classify"
name = "Codebase Classify"
description = "Comprehensive codebase analysis producing index, summary, and map"
tags = ["assessment", "any-language"]
timeout = "4h"
enabled = true
auto_start = false

# PHASE 1: IMPORT & INDEX (Parallel)

[step.code_map]
type = "code_map"
description = "Build hierarchical code structure map"
project_name = "quaero"
dir_path = "C:\\development\\quaero"
tags = ["codemap", "quaero"]
max_depth = 15
exclude_paths = [
    ".git",
    "node_modules",
    "vendor",
    "dist",
    "build",
    "target",
    "bin",
    "data",
    "test",
]
skip_summarization = true

[step.import_files]
type = "local_dir"
description = "Import codebase files as documents"
dir_path = "C:\\development\\quaero"
tags = ["codebase", "quaero"]
extensions = [".go", ".js", ".html", ".toml", ".json"]
exclude_paths = [
    ".git",
    "node_modules",
    "vendor",
    "dist",
    "build",
    "target",
    "bin",
    "data",
    "test",
]
max_file_size = 1048576

# PHASE 2: ANALYSIS (Depends on Phase 1)

[step.rule_classify_files]
type = "agent"
description = "Rule-based classification of file purpose (fast, no LLM)"
depends = "import_files"
agent_type = "rule_classifier"
tags = ["quaero_classifies", "quaero"]
filter_tags = ["codebase", "quaero"]


[error_tolerance]
max_child_failures = 50
failure_action = "continue"
