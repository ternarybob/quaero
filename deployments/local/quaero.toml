# Quaero Configuration
# ====================
#
# This file contains ONLY user-facing configuration settings.
# Technical parameters (cache sizes, timeouts, dimensions, etc.) have sensible
# defaults hardcoded in the application and should not be modified unless you
# are debugging or have specific requirements.
#
# Configuration Load Order (priority from lowest to highest):
#   1. Defaults (hardcoded in application)
#   2. TOML file (this file)
#   3. Environment variables (QUAERO_*)
#   4. Command line flags (--port, --host, --config)
#
# Only uncomment settings you want to override from defaults.

# =============================================================================
# Environment Configuration
# =============================================================================
# Controls environment mode: "development" or "production"
# Production mode rejects test URLs (localhost, 127.0.0.1, etc.) for safety
# Default: development (allows test URLs)
# Env vars: QUAERO_ENV, GO_ENV (highest priority)

environment = "development" # "development" or "production"

# =============================================================================
# Server Configuration
# =============================================================================
# Defaults: port=8080, host="localhost"
# CLI flags: --port, --host (highest priority)
# Env vars: QUAERO_SERVER_PORT, QUAERO_SERVER_HOST

# [server]
# port = 8080  # Uncomment to override default

# =============================================================================
# Storage Configuration
# =============================================================================
# Defaults: path="./data/quaero.db", images="./data/images", attachments="./data/attachments"
# Env vars: QUAERO_SQLITE_PATH

# [storage.sqlite]
# path = "./data/quaero.db"  # Uncomment to override default

# [storage.filesystem]
# images = "./data/images"  # Uncomment to override default

# =============================================================================
# Google Places API Configuration
# =============================================================================
# Configure Google Places API for location-based search functionality.
# Get your API key from: https://console.cloud.google.com/apis/credentials
# Defaults: max_results_per_search=20, request_timeout=30s, rate_limit=1s
# Env var: QUAERO_PLACES_API_KEY

# [places_api]
# api_key = "YOUR_GOOGLE_PLACES_API_KEY"  # Required for places search jobs

# =============================================================================
# Gemini Configuration (Google ADK - Unified for Agents and Chat)
# =============================================================================
# Configure AI services for agents (keyword extraction) and chat completions.
# Both services use the same Google Gemini API key and models.
# Requires Google Gemini API key from: https://aistudio.google.com/app/apikey
#
# IMPORTANT: Gemini services require a valid API key. No offline fallback is available.
# If the API key is missing or invalid, agent and chat operations will fail immediately.
#
# Defaults: agent_model="gemini-2.0-flash", chat_model="gemini-2.0-flash",
#           max_turns=10, timeout="5m", temperature=0.7
# Env vars: QUAERO_GEMINI_GOOGLE_API_KEY, QUAERO_GEMINI_AGENT_MODEL,
#           QUAERO_GEMINI_CHAT_MODEL, QUAERO_GEMINI_MAX_TURNS,
#           QUAERO_GEMINI_TIMEOUT, QUAERO_GEMINI_TEMPERATURE

# [gemini]
# google_api_key = "YOUR_GOOGLE_GEMINI_API_KEY"  # Required for all AI operations
# agent_model = "gemini-2.0-flash"                # Model for agent operations (keyword extraction)
# chat_model = "gemini-2.0-flash"                 # Model for chat operations
# max_turns = 10                                   # Maximum agent conversation turns
# timeout = "5m"                                   # Operation timeout
# temperature = 0.7                                # Chat completion temperature (0.0-1.0)

# =============================================================================
# Job Definitions Configuration
# =============================================================================
# Job definitions are user-defined workflows stored as TOML/JSON files.
# Place .toml or .json files in the definitions_dir to auto-load at startup.
#
# Supported job types:
# - crawler: Web crawling jobs (scrape websites, follow links, extract content)
# - places: Google Places API search jobs (find locations, get details)
# - agent: AI agent jobs (keyword extraction, summarization, classification)
# - custom: Custom workflow jobs (multi-step orchestration)
#
# Default: definitions_dir="./job-definitions"
# Env var: QUAERO_JOBS_DEFINITIONS_DIR

# [jobs]
# definitions_dir = "./job-definitions"  # Uncomment to override default

# =============================================================================
# Variables Configuration
# =============================================================================
# Configure storage for user-defined variables (API keys, secrets, configuration values).
# Variables are loaded from TOML files in the variables directory at startup.
#
# TOML FILE FORMAT (stored in ./variables/*.toml):
#   [[keys]]
#   key = "variable-name"
#   value = "your-secret-value"      # Required
#   description = "Optional description"  # Optional
#
# USAGE:
#   - Variables can be referenced in config using placeholder syntax: {variable-name}
#   - View and manage in UI: /settings?a=auth-apikeys
#   - Values are masked in logs and UI for security
#
# Example: See bin/variables/example-variables.toml
#
# Default storage location: ./variables/ directory
# File format: Any *.toml file in the variables directory
# Env var: QUAERO_VARIABLES_DIR

# [variables]
# dir = "./variables"  # Uncomment to override default

# =============================================================================
# Crawler Configuration (Firecrawl-style HTML Scraping)
# =============================================================================
# Configure HTML scraping behavior for web page crawling.
# Follows Firecrawl architecture: scrape pages, convert to markdown, extract metadata.
#
# Defaults: user_agent="Quaero/1.0 (Web Crawler)", max_concurrency=3,
#           request_delay=1s, random_delay=500ms, request_timeout=30s,
#           max_body_size=10MB, max_depth=5, output_format="markdown"
# Env vars: QUAERO_CRAWLER_USER_AGENT, QUAERO_CRAWLER_MAX_CONCURRENCY, etc.

# [crawler]
# user_agent = "Quaero/1.0 (Web Crawler)"  # Uncomment to override default
# max_concurrency = 3                       # Uncomment to override default

# =============================================================================
# Logging Configuration
# =============================================================================
# Configure application logging and real-time UI event publishing.
#
# Log Flow Architecture:
#   Services → Arbor Logger → LogService → [Database + EventService]
#                                             ↓           ↓
#                                        (all logs)   (filtered)
#                                                        ↓
#                                                   WebSocket → UI
#
# Key Concept: LogService filters logs and publishes to EventService.
# Only logs >= min_event_level are published as events to the UI.
# All logs (regardless of level) are saved to the database for auditing.
#
# Defaults: level="info", format="text", output=["stdout","file"], min_event_level="info"
# Env vars: QUAERO_LOG_LEVEL, QUAERO_LOG_FORMAT, QUAERO_LOG_MIN_EVENT_LEVEL

# [logging]
# level = "info"            # Uncomment to override default (debug, info, warn, error)
# min_event_level = "info"  # Minimum log level to publish as real-time events to UI
#                           # Example: Set to "warn" to only show warnings/errors in UI
#                           # Example: Set to "debug" to show all logs in UI (verbose)

# =============================================================================
# WebSocket Event Broadcasting Configuration
# =============================================================================
# Configure server-side filtering for real-time event broadcasting to browser UI.
# Events are filtered before broadcasting to reduce client load and network traffic.
#
# Defaults: allowed_events=[] (all events), min_level="info",
#           throttle_intervals={crawl_progress:1s, job_spawn:500ms}
# Env vars: QUAERO_WEBSOCKET_ALLOWED_EVENTS, QUAERO_WEBSOCKET_THROTTLE_CRAWL_PROGRESS,
#           QUAERO_WEBSOCKET_THROTTLE_JOB_SPAWN

# [websocket]
# allowed_events = []  # Empty list allows all events (default)
# min_level = "info"   # Minimum log level for WebSocket events (default: info)

# [websocket.throttle_intervals]
# crawl_progress = "1s"   # Uncomment to override default
# job_spawn = "500ms"     # Uncomment to override default
