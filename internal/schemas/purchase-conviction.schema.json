{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "purchase-conviction.schema.json",
  "title": "Purchase Conviction Schema",
  "description": "Schema for high-conviction purchase analysis with adversarial review",
  "type": "object",
  "required": ["executive_summary", "stocks", "comparative_table", "warnings"],
  "properties": {
    "executive_summary": {
      "type": "string",
      "description": "2-3 sentences on top picks and market context"
    },
    "stocks": {
      "type": "array",
      "description": "Analysis for each stock in the watchlist",
      "items": {
        "type": "object",
        "required": ["ticker", "name", "fundamental_analysis", "technical_analysis", "short_seller_bear_case", "analyst_resolution", "conviction_score"],
        "properties": {
          "ticker": {
            "type": "string",
            "description": "ASX stock ticker code (e.g., GNP)"
          },
          "name": {
            "type": "string",
            "description": "Company full name"
          },
          "fundamental_analysis": {
            "type": "string",
            "description": "Fundamental analysis paragraph including market cap, P/E, EPS"
          },
          "technical_analysis": {
            "type": "string",
            "description": "Technical analysis paragraph including SMA, RSI, trend assessment"
          },
          "short_seller_bear_case": {
            "type": "string",
            "description": "Adversarial bear case arguments"
          },
          "analyst_resolution": {
            "type": "string",
            "description": "Resolution of bull vs bear arguments"
          },
          "conviction_score": {
            "type": "integer",
            "description": "Overall conviction score 0-100",
            "minimum": 0,
            "maximum": 100
          },
          "conviction_breakdown": {
            "type": "object",
            "description": "Weighted score breakdown",
            "properties": {
              "fundamental": {
                "type": "integer",
                "description": "Fundamental score (weighted 35%)",
                "minimum": 0,
                "maximum": 35
              },
              "technical": {
                "type": "integer",
                "description": "Technical score (weighted 25%)",
                "minimum": 0,
                "maximum": 25
              },
              "risk": {
                "type": "integer",
                "description": "Risk score (weighted 25%)",
                "minimum": 0,
                "maximum": 25
              },
              "insider": {
                "type": "integer",
                "description": "Insider activity score (weighted 10%)",
                "minimum": 0,
                "maximum": 10
              },
              "macro": {
                "type": "integer",
                "description": "Macro environment score (weighted 5%)",
                "minimum": 0,
                "maximum": 5
              }
            }
          },
          "tier": {
            "type": "string",
            "description": "Conviction tier classification",
            "enum": ["Tier 1 (High)", "Tier 2 (Medium)", "Tier 3 (Speculative)", "Tier 4 (Avoid)"]
          }
        }
      }
    },
    "comparative_table": {
      "type": "array",
      "description": "Summary comparison of all stocks",
      "items": {
        "type": "object",
        "required": ["ticker", "total_score", "tier"],
        "properties": {
          "ticker": {
            "type": "string"
          },
          "fundamental": {
            "type": "integer",
            "minimum": 0,
            "maximum": 35
          },
          "technical": {
            "type": "integer",
            "minimum": 0,
            "maximum": 25
          },
          "risk": {
            "type": "integer",
            "minimum": 0,
            "maximum": 25
          },
          "insider": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10
          },
          "macro": {
            "type": "integer",
            "minimum": 0,
            "maximum": 5
          },
          "total_score": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100
          },
          "tier": {
            "type": "string",
            "enum": ["Tier 1 (High)", "Tier 2 (Medium)", "Tier 3 (Speculative)", "Tier 4 (Avoid)"]
          }
        }
      }
    },
    "warnings": {
      "type": "array",
      "description": "Risk warnings and market concerns",
      "items": {
        "type": "string"
      }
    }
  }
}
