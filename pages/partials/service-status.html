<div class="columns">
  <div class="column is-half">
    <div class="card" x-data="parserStatus">
      <header class="card-header">
        <p class="card-header-title">Parser Status</p>
        <button class="card-header-icon" aria-label="refresh" @click="refresh()" title="Refresh">
          <span class="icon"><i class="fas fa-sync-alt"></i></span>
        </button>
      </header>
      <div class="card-content">
        <div class="table-container">
          <table class="table is-fullwidth is-striped">
            <thead>
              <tr>
                <th>Component</th>
                <th>Status</th>
                <th>Last Updated</th>
                <th>Details</th>
              </tr>
            </thead>
            <tbody>
              <template x-if="loading && items.length === 0">
                <tr>
                  <td colspan="4" class="has-text-centered">Loading...</td>
                </tr>
              </template>
              <template x-if="error && items.length === 0">
                <tr>
                  <td colspan="4" class="has-text-centered has-text-danger" x-text="error"></td>
                </tr>
              </template>
              <template x-if="items.length > 0">
                <template x-for="item in items" :key="item.component">
                  <tr>
                    <td x-text="item.component"></td>
                    <td><span class="tag is-success" x-text="item.status"></span></td>
                    <td x-text="item.lastUpdated"></td>
                    <td x-text="item.details"></td>
                  </tr>
                </template>
              </template>
              <template x-if="error && items.length > 0">
                <tr>
                  <td colspan="4" class="has-text-centered">
                    <span class="tag is-warning is-light">
                      <span class="icon"><i class="fas fa-exclamation-triangle"></i></span>
                      <span x-text="'Last refresh failed: ' + error"></span>
                    </span>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="column is-half">
    <div class="card" x-data="authDetails">
      <header class="card-header">
        <p class="card-header-title">Authentication Details</p>
        <button class="card-header-icon" aria-label="refresh" @click="refresh()" title="Refresh">
          <span class="icon"><i class="fas fa-sync-alt"></i></span>
        </button>
      </header>
      <div class="card-content">
        <div class="table-container">
          <table class="table is-fullwidth is-striped">
            <thead>
              <tr>
                <th>Service</th>
                <th>Status</th>
                <th>User</th>
              </tr>
            </thead>
            <tbody>
              <template x-if="loading && services.length === 0">
                <tr>
                  <td colspan="3" class="has-text-centered">Loading...</td>
                </tr>
              </template>
              <template x-if="error && services.length === 0">
                <tr>
                  <td colspan="3" class="has-text-centered has-text-danger" x-text="error"></td>
                </tr>
              </template>
              <template x-if="services.length > 0">
                <template x-for="service in services" :key="service.name">
                  <tr>
                    <td x-text="service.name"></td>
                    <td><span :class="getStatusClass(service.authenticated)" x-text="getStatusText(service.authenticated)"></span></td>
                    <td x-text="service.user"></td>
                  </tr>
                </template>
              </template>
              <template x-if="error && services.length > 0">
                <tr>
                  <td colspan="3" class="has-text-centered">
                    <span class="tag is-warning is-light">
                      <span class="icon"><i class="fas fa-exclamation-triangle"></i></span>
                      <span x-text="'Last refresh failed: ' + error"></span>
                    </span>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
