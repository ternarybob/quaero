<!DOCTYPE html>
<html lang="en">

<head>
    {{template "head.html" .}}
    <title>Settings - Quaero</title>
    <!-- Load settings components BEFORE Alpine.js (no defer) -->
    <script src="/static/settings-components.js"></script>
</head>

<body>

    {{template "navbar.html" .}}

    <main class="page-container">

        <!-- Page Title -->
        <div class="page-title">
            <h1>Settings</h1>
            <p>System configuration, status, and operational controls</p>
        </div>

        <!-- Settings Two-Column Layout (Dynamic Loading) -->
        <div x-data="settingsNavigation" class="settings-layout">

            <!-- Left Sidebar: Vertical Menu -->
            <aside class="settings-sidebar">
                <nav class="settings-menu">
                    <button
                        class="settings-menu-item"
                        @click="selectSection('auth-apikeys')"
                        :class="{ 'active': activeSection === 'auth-apikeys' }">
                        <i class="icon icon-people"></i>
                        API Keys
                    </button>
                    <button
                        class="settings-menu-item"
                        @click="selectSection('auth-cookies')"
                        :class="{ 'active': activeSection === 'auth-cookies' }">
                        <i class="icon icon-people"></i>
                        Authentication
                    </button>
                    <button
                        class="settings-menu-item"
                        @click="selectSection('config')"
                        :class="{ 'active': activeSection === 'config' }">
                        <i class="icon icon-apps"></i>
                        Configuration
                    </button>
                    <button
                        class="settings-menu-item"
                        @click="selectSection('danger')"
                        :class="{ 'active': activeSection === 'danger' }">
                        <i class="icon icon-stop"></i>
                        Danger Zone
                    </button>
                    <button
                        class="settings-menu-item"
                        @click="selectSection('status')"
                        :class="{ 'active': activeSection === 'status' }">
                        <i class="icon icon-flag"></i>
                        Service Status
                    </button>
                </nav>
            </aside>

            <!-- Right Content Panel -->
            <main class="settings-content">
                <!-- Loading State -->
                <div x-show="loading[activeSection]" class="text-center loading-state">
                    <div class="loading loading-lg"></div>
                    <p style="margin-top: 1rem;" x-text="'Loading ' + activeSection.replace('-', ' ') + '...'"></p>
                </div>

                <!-- Dynamic Content -->
                <div x-show="!loading[activeSection]" x-html="content[activeSection]"></div>
            </main>

        </div>

        <!-- Service Logs -->
        <section style="margin-top: 1.5rem;">
            {{template "service-logs.html" .}}
        </section>

    </main>

    {{template "footer.html" .}}

    {{template "snackbar.html" .}}
</body>

</html>