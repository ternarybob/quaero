# Moneyball Portfolio Assessment - Test Configuration
# ===========================================================================
# Test version with 3 stocks for UI test validation
# Tests child job visibility and UI reactivity

id = "moneyball-stocks-daily-test"
name = "Moneyball Portfolio Assessment (Test)"
type = "job_template"
description = "Test job - Moneyball analysis for 3 stocks"
tags = ["moneyball", "asx", "stocks", "test", "portfolio"]
schedule = ""
timeout = "30m"
enabled = true
auto_start = false

[step.run_moneyball_analysis]
type = "job_template"
description = "Execute Moneyball assessment for test stocks"
on_error = "continue"
template = "moneyball-stock-assessment"

# 3 test stocks for UI validation
variables = [
    { ticker = "ROC", name = "RocketBoots Limited", industry = "AI" },
    { ticker = "CBA", name = "Commonwealth Bank", industry = "banking" },
    { ticker = "NAB", name = "National Australia Bank", industry = "banking" },
]

# Portfolio summary step runs after all child jobs complete
[step.generate_portfolio_summary]
type = "summary"
description = "Generate consolidated portfolio review"
depends = "run_moneyball_analysis"
on_error = "fail"
filter_tags = ["moneyball-recommendation"]
api_key = "{google_gemini_api_key}"
prompt = """Generate a brief test portfolio summary for the analyzed stocks.
List each stock with its recommendation status."""
output_tags = ["moneyball-portfolio-review", "test-portfolio"]
