# SMSF Portfolio Review - Orchestrated Version
# =========================================================================
# Uses goal_template to reference reusable analysis script.
# User provides variables (portfolio holdings) and email config.
#
# TEMPLATE: job-templates/smsf-portfolio-analysis-goal.toml
# Contains: goal, tools, thinking_level, output_tags
#
# THIS FILE: User-specific configuration
# Contains: variables (holdings with units/avg_price), benchmarks, email settings
# =========================================================================

id = "smsf-portfolio-daily-orchestrated"
name = "SMSF Portfolio Strategy Review (Thinking)"
type = "orchestrator"
description = "AI-powered SMSF portfolio analysis with strategic reasoning"
tags = ["smsf", "portfolio", "daily", "orchestrator", "thinking"]
schedule = ""
timeout = "3h"
enabled = true
auto_start = false

# =========================================================================
# User Configuration - Portfolio Holdings
# =========================================================================

[config]
# Portfolio holdings - add/remove as needed
# Available variable keys: ticker, name, industry, units, avg_price, weighting
variables = [
    # =========================================================================
    # Infrastructure & Industrials
    # =========================================================================
    { ticker = "GNP", name = "GenusPlus Group Ltd", industry = "infrastructure", units = 3159, avg_price = 6.303, weighting = 5.97 },
    { ticker = "SKS", name = "SKS Technologies Group", industry = "technology-infrastructure", units = 4925, avg_price = 4.025, weighting = 6.01 },

    # =========================================================================
    # Uncomment to add more holdings:
    # =========================================================================
    # # ETFs & Index Funds (Defensive/Core)
    # { ticker = "AAA", name = "Betashares Australian High Interest Cash ETF", industry = "cash-etf", units = 198, avg_price = 50.235, weighting = 3.04 },
    # { ticker = "VACF", name = "Vanguard Australian Corporate Fixed Interest Index ETF", industry = "bond-etf", units = 193, avg_price = 51.666, weighting = 3.05 },
    # { ticker = "VGS", name = "Vanguard MSCI Index International Shares ETF", industry = "global-etf", units = 64, avg_price = 154.031, weighting = 3.01 },
    # { ticker = "PMGOLD", name = "Perth Mint Gold", industry = "gold-etf", units = 597, avg_price = 66.747, weighting = 12.21 },

    # # Large Cap Blue Chips (Stable Income)
    # { ticker = "WES", name = "Wesfarmers Limited", industry = "retail", units = 122, avg_price = 81.209, weighting = 3.03 },
    # { ticker = "WOW", name = "Woolworths Group Limited", industry = "retail", units = 339, avg_price = 29.329, weighting = 3.04 },
]

# Benchmark indices for comparison
benchmarks = [
    { code = "XJO", name = "S&P/ASX 200" },
    { code = "XSO", name = "S&P/ASX Small Ordinaries" },
]

# =========================================================================
# Orchestrator Step - References Goal Template
# =========================================================================

[step.strategic_review]
type = "orchestrator"
description = "AI-powered strategic portfolio review"
on_error = "continue"

# Reference the goal template (contains goal, tools, thinking_level, output_tags)
goal_template = "smsf-portfolio-analysis-goal"

# =========================================================================
# Email Step - Send Portfolio Report
# =========================================================================

[step.email_portfolio]
type = "email"
description = "Email consolidated SMSF portfolio review"
depends = "strategic_review"
on_error = "fail"
to = "bobmcallan@gmail.com"
subject = "SMSF Portfolio Review - AI-Powered Strategic Analysis"
body_from_tag = "smsf-portfolio-review"
save_to_dir = "test/api/results"
