# Stock Analysis - User-Defined Variables
# =========================================================================
# Uses stock-analysis-goal template with user-provided ticker list.
# Optionally includes portfolio-assessment for portfolio-level review.
#
# TEMPLATE: job-templates/stock-analysis-goal.toml
# OPTIONAL: job-templates/portfolio-assessment-goal.toml
#
# VARIABLES FORMAT:
# - ticker: ASX code (required) - can be "GNP" or "ASX:GNP"
# - portfolio: grouping name (optional, default "default")
# =========================================================================

# =========================================================================
# META
# =========================================================================
[meta]
author = "Claude Code"
version = "1.0"
created = "2026-01-02"
updated = "2026-01-02"
purpose = "AI-powered stock analysis using user-defined ticker list"

id = "stock-analysis-variables"
name = "Stock Analysis (User Variables)"
type = "orchestrator"
description = "AI-powered stock analysis using user-defined tickers"
tags = ["stocks", "analysis", "variables", "orchestrator"]
schedule = ""
timeout = "2h"
enabled = true
auto_start = false

# =========================================================================
# User Configuration - Ticker List
# =========================================================================

[config]
# Ticker list - add/remove as needed
# Optional 'portfolio' field groups stocks for assessment
variables = [
    # Trading Portfolio
    { ticker = "ASX:GNP", portfolio = "trading" },
    { ticker = "ASX:BCN", portfolio = "trading" },
    { ticker = "ASX:MYG", portfolio = "trading" },

    # Ungrouped (default portfolio)
    # { ticker = "ASX:WES" },
    # { ticker = "ASX:WOW" },
]

# Benchmark for comparison
benchmarks = [
    { code = "XJO", name = "S&P/ASX 200" },
]

# =========================================================================
# Step 1: Stock Analysis
# =========================================================================

[step.stock_analysis]
type = "orchestrator"
description = "Analyze individual stocks"
on_error = "continue"
goal_template = "stock-analysis-goal"

# =========================================================================
# Step 2: Portfolio Assessment (Optional)
# =========================================================================

[step.portfolio_assessment]
type = "orchestrator"
description = "Portfolio-level analysis"
depends = "stock_analysis"
on_error = "continue"
goal_template = "portfolio-assessment-goal"

# =========================================================================
# Step 3: Email Report
# =========================================================================

[step.email_report]
type = "email"
description = "Email stock analysis report"
depends = "portfolio_assessment"
always_run = true
on_error = "fail"
to = "bobmcallan@gmail.com"
subject = "Stock Analysis - AI-Powered Report"
body_from_tag = "portfolio-review"
